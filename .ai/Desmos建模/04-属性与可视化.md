# 04 - 属性与可视化

> **前置阅读**：请确保您已阅读本知识库的前三篇文档。

本文档介绍在 Desmos 中，如何为公式（即依赖关系图中的节点）附加各种属性，以控制其可视化表现。

## 属性系统：节点的元数据

在 Desmos 中，每一行公式，即 DAG 中的每一个具名或匿名节点，都可以附带一个属性集。这些属性控制着节点的视觉样式、交互行为等。

关键在于，**属性的值本身也可以是表达式**。这意味着一个节点的颜色、线宽等属性，可以动态地依赖于另一个节点（如一个滑动条）的计算结果。

### 绘图属性

这些属性主要用于控制可见图形的样式：

-   **颜色**: 可设置为常量颜色值或一个动态表达式。
-   **线宽**: 可设置为常量数值或一个动态表达式。
-   **透明度 (Opacity)**: 可设置为 `0` 到 `1` 之间的常量或表达式。
-   **线条样式**: 可选择实线、虚线、点线等。
-   **点样式**: 对于点集或可拖动点，可设置点的形状（圆形、十字等）、大小和拖动行为。

### 滑动条属性

对于结果为单一数值的变量定义，Desmos 会自动为其生成一个滑动条，并附带以下可配置属性：

-   **范围**: 滑动条的最小值和最大值，两者均可设置为常量或表达式。
-   **步长 (Step)**: 滑动条每次变化的最小单位，可设置为常量或表达式。
-   **播放设置**: 对于动画，可以设置播放速度和模式（单向、往复等）。

### 属性的行为特性

-   **持久性**: 属性会“粘”在对应的公式行上。即使用户修改了公式内容，导致其类型发生变化（例如从一个变量定义变为一个方程），之前设置的颜色等属性只要适用，就会被保留下来。
-   **可用性**: 某些属性仅对特定类型的公式有效。当公式类型改变时，不适用的属性会被暂时隐藏，但其值会被记住，以便在公式类型改回来时恢复。

## 公式列表的特性

公式列表是用户与 Desmos 依赖图交互的前端界面，它具有以下特性：

-   **逻辑并行**: 如 `01` 号文档所述，列表的顺序不影响计算逻辑，所有公式在计算上是并行的。
-   **视觉层叠**: 列表的顺序决定了图形的绘制顺序。在下方的公式所绘制的图形，会叠在上方公式的图形之上。
-   **交互功能**:
    -   **注释**: 可以为公式添加说明性的注释文本。
    -   **文件夹**: 可以将多行公式组织在可折叠的文件夹中，便于管理。
    -   **隐藏**: 可以隐藏一个公式的可视化图象。这不会影响它在依赖图中的连接，其他依赖于它的公式仍然可以正常计算。
